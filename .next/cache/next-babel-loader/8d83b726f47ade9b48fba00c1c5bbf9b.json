{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/gloria/blogr-nextjs-prisma/pages/drafts.tsx\",\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n// pages/drafts.tsx\nimport React from 'react';\nimport Layout from '../components/Layout';\nimport Post from '../components/Post';\nimport { useSession } from 'next-auth/client';\n\nvar Drafts = function Drafts(props) {\n  _s();\n\n  var _useSession = useSession(),\n      _useSession2 = _slicedToArray(_useSession, 1),\n      session = _useSession2[0];\n\n  if (!session) {\n    return __jsx(Layout, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 7\n      }\n    }, __jsx(\"h1\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }\n    }, \"My Drafts\"), __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }\n    }, \"You need to be authenticated to view this page.\"));\n  }\n\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-1536480903\" + \" \" + \"page\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    className: \"jsx-1536480903\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, \"My Drafts\"), __jsx(\"main\", {\n    className: \"jsx-1536480903\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, props.drafts.map(function (post) {\n    return __jsx(\"div\", {\n      key: post.id,\n      className: \"jsx-1536480903\" + \" \" + \"post\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }\n    }, __jsx(Post, {\n      post: post,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 15\n      }\n    }));\n  }))), __jsx(_JSXStyle, {\n    id: \"1536480903\",\n    __self: _this\n  }, \".post.jsx-1536480903{background:var(--geist-background);-webkit-transition:box-shadow 0.1s ease-in;transition:box-shadow 0.1s ease-in;}.post.jsx-1536480903:hover{box-shadow:1px 1px 3px #aaa;}.post.jsx-1536480903+.post.jsx-1536480903{margin-top:2rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2dsb3JpYS9ibG9nci1uZXh0anMtcHJpc21hL3BhZ2VzL2RyYWZ0cy50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNERrQixBQUc4QyxBQUtQLEFBSVosZ0JBQ2xCLFlBSkEsT0FMcUMsOEVBQ3JDIiwiZmlsZSI6Ii9ob21lL2dsb3JpYS9ibG9nci1uZXh0anMtcHJpc21hL3BhZ2VzL2RyYWZ0cy50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9kcmFmdHMudHN4XHJcblxyXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBHZXRTZXJ2ZXJTaWRlUHJvcHMgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IExheW91dCBmcm9tICcuLi9jb21wb25lbnRzL0xheW91dCc7XHJcbmltcG9ydCBQb3N0LCB7IFBvc3RQcm9wcyB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9zdCc7XHJcbmltcG9ydCB7IHVzZVNlc3Npb24sIGdldFNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgvY2xpZW50JztcclxuaW1wb3J0IHByaXNtYSBmcm9tICcuLi9saWIvcHJpc21hJztcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRTZXJ2ZXJTaWRlUHJvcHM6IEdldFNlcnZlclNpZGVQcm9wcyA9IGFzeW5jICh7IHJlcSwgcmVzIH0pID0+IHtcclxuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbih7IHJlcSB9KTtcclxuICBpZiAoIXNlc3Npb24pIHtcclxuICAgIHJlcy5zdGF0dXNDb2RlID0gNDAzO1xyXG4gICAgcmV0dXJuIHsgcHJvcHM6IHsgZHJhZnRzOiBbXSB9IH07XHJcbiAgfVxyXG5cclxuICBjb25zdCBkcmFmdHMgPSBhd2FpdCBwcmlzbWEucG9zdC5maW5kTWFueSh7XHJcbiAgICB3aGVyZToge1xyXG4gICAgICBhdXRob3I6IHsgZW1haWw6IHNlc3Npb24udXNlci5lbWFpbCB9LFxyXG4gICAgICBwdWJsaXNoZWQ6IGZhbHNlLFxyXG4gICAgfSxcclxuICAgIGluY2x1ZGU6IHtcclxuICAgICAgYXV0aG9yOiB7XHJcbiAgICAgICAgc2VsZWN0OiB7IG5hbWU6IHRydWUgfSxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgfSk7XHJcbiAgcmV0dXJuIHtcclxuICAgIHByb3BzOiB7IGRyYWZ0cyB9LFxyXG4gIH07XHJcbn07XHJcblxyXG50eXBlIFByb3BzID0ge1xyXG4gIGRyYWZ0czogUG9zdFByb3BzW107XHJcbn07XHJcblxyXG5jb25zdCBEcmFmdHM6IFJlYWN0LkZDPFByb3BzPiA9IChwcm9wcykgPT4ge1xyXG4gIGNvbnN0IFtzZXNzaW9uXSA9IHVzZVNlc3Npb24oKTtcclxuXHJcbiAgaWYgKCFzZXNzaW9uKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8TGF5b3V0PlxyXG4gICAgICAgIDxoMT5NeSBEcmFmdHM8L2gxPlxyXG4gICAgICAgIDxkaXY+WW91IG5lZWQgdG8gYmUgYXV0aGVudGljYXRlZCB0byB2aWV3IHRoaXMgcGFnZS48L2Rpdj5cclxuICAgICAgPC9MYXlvdXQ+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxMYXlvdXQ+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZVwiPlxyXG4gICAgICAgIDxoMT5NeSBEcmFmdHM8L2gxPlxyXG4gICAgICAgIDxtYWluPlxyXG4gICAgICAgICAge3Byb3BzLmRyYWZ0cy5tYXAoKHBvc3QpID0+IChcclxuICAgICAgICAgICAgPGRpdiBrZXk9e3Bvc3QuaWR9IGNsYXNzTmFtZT1cInBvc3RcIj5cclxuICAgICAgICAgICAgICA8UG9zdCBwb3N0PXtwb3N0fSAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICkpfVxyXG4gICAgICAgIDwvbWFpbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAucG9zdCB7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1nZWlzdC1iYWNrZ3JvdW5kKTtcclxuICAgICAgICAgIHRyYW5zaXRpb246IGJveC1zaGFkb3cgMC4xcyBlYXNlLWluO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLnBvc3Q6aG92ZXIge1xyXG4gICAgICAgICAgYm94LXNoYWRvdzogMXB4IDFweCAzcHggI2FhYTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5wb3N0ICsgLnBvc3Qge1xyXG4gICAgICAgICAgbWFyZ2luLXRvcDogMnJlbTtcclxuICAgICAgICB9XHJcbiAgICAgIGB9PC9zdHlsZT5cclxuICAgIDwvTGF5b3V0PlxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEcmFmdHM7XHJcbiJdfQ== */\\n/*@ sourceURL=/home/gloria/blogr-nextjs-prisma/pages/drafts.tsx */\"));\n};\n\n_s(Drafts, \"Vxy5gMemEU/s8dbgarDyE2/t+kg=\", false, function () {\n  return [useSession];\n});\n\n_c = Drafts;\nexport var __N_SSP = true;\nexport default Drafts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Drafts\");","map":{"version":3,"sources":["/home/gloria/blogr-nextjs-prisma/pages/drafts.tsx"],"names":["React","Layout","Post","useSession","Drafts","props","session","drafts","map","post","id"],"mappings":";;;;;;;;AAAA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,IAAP,MAAgC,oBAAhC;AACA,SAASC,UAAT,QAAuC,kBAAvC;;AA8BA,IAAMC,MAAuB,GAAG,SAA1BA,MAA0B,CAACC,KAAD,EAAW;AAAA;;AACzC,oBAAkBF,UAAU,EAA5B;AAAA;AAAA,MAAOG,OAAP;;AAEA,MAAI,CAACA,OAAL,EAAc;AACZ,WACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yDAFF,CADF;AAMD;;AAED,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,wCAAe,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,KAAK,CAACE,MAAN,CAAaC,GAAb,CAAiB,UAACC,IAAD;AAAA,WAChB;AAAK,MAAA,GAAG,EAAEA,IAAI,CAACC,EAAf;AAAA,0CAA6B,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,IAAD;AAAM,MAAA,IAAI,EAAED,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADgB;AAAA,GAAjB,CADH,CAFF,CADF;AAAA;AAAA;AAAA,orGADF;AA4BD,CAxCD;;GAAML,M;UACcD,U;;;KADdC,M;;AA0CN,eAAeA,MAAf","sourcesContent":["// pages/drafts.tsx\r\n\r\nimport React from 'react';\r\nimport { GetServerSideProps } from 'next';\r\nimport Layout from '../components/Layout';\r\nimport Post, { PostProps } from '../components/Post';\r\nimport { useSession, getSession } from 'next-auth/client';\r\nimport prisma from '../lib/prisma';\r\n\r\nexport const getServerSideProps: GetServerSideProps = async ({ req, res }) => {\r\n  const session = await getSession({ req });\r\n  if (!session) {\r\n    res.statusCode = 403;\r\n    return { props: { drafts: [] } };\r\n  }\r\n\r\n  const drafts = await prisma.post.findMany({\r\n    where: {\r\n      author: { email: session.user.email },\r\n      published: false,\r\n    },\r\n    include: {\r\n      author: {\r\n        select: { name: true },\r\n      },\r\n    },\r\n  });\r\n  return {\r\n    props: { drafts },\r\n  };\r\n};\r\n\r\ntype Props = {\r\n  drafts: PostProps[];\r\n};\r\n\r\nconst Drafts: React.FC<Props> = (props) => {\r\n  const [session] = useSession();\r\n\r\n  if (!session) {\r\n    return (\r\n      <Layout>\r\n        <h1>My Drafts</h1>\r\n        <div>You need to be authenticated to view this page.</div>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"page\">\r\n        <h1>My Drafts</h1>\r\n        <main>\r\n          {props.drafts.map((post) => (\r\n            <div key={post.id} className=\"post\">\r\n              <Post post={post} />\r\n            </div>\r\n          ))}\r\n        </main>\r\n      </div>\r\n      <style jsx>{`\r\n        .post {\r\n          background: var(--geist-background);\r\n          transition: box-shadow 0.1s ease-in;\r\n        }\r\n\r\n        .post:hover {\r\n          box-shadow: 1px 1px 3px #aaa;\r\n        }\r\n\r\n        .post + .post {\r\n          margin-top: 2rem;\r\n        }\r\n      `}</style>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Drafts;\r\n"]},"metadata":{},"sourceType":"module"}